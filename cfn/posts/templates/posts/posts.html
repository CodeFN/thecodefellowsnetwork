{% extends 'base.html' %}

{% block title %}Posts{% endblock %}

{% block body %}
<h2>Posts</h2>

<a href="{% url 'new_post' %}">Make a new post</a>

<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Category</th>
      <th>Author</th>
      <th>Posted</th>
      <th>Content</th>
    </tr>
  </thead>
  <tbody>
    {% for post in posts %}
    <tr>
      <td>
        <a href="{% url 'post' pk=post.id %}">
          {{ post.title }}
        </a>
      </td>
      <td>
        {{ post.category }}
      </td>
      <td>
        {% if post.author.username != user.username %}
        <a href="{% url 'profile_other' post.author.username %}">
        {% elif post.author.username == user.username %}
        <a href="{% url 'profile_self' %}">
        {% endif %}
          {{ post.author.username }}
        </a>
      </td>
      <td>
        {{ post.date_uploaded|timesince }} ago
      </td>
      <td>
        {% if post.content|length > 20 %}
          {{ post.content|slice:":20" }}...
        {% else %}
          {{ post.content }}
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
